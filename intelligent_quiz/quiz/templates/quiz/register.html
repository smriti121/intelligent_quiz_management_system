{% extends 'base.html' %}

{% block content %}
<div class="container" style="display:flex; align-items:center; justify-content:center; min-height:80vh; background:linear-gradient(135deg, #d4e7f9, #f9e6f2);">
    <div style="width:400px; background:white; padding:35px; border-radius:18px; box-shadow:0px 6px 25px rgba(0,0,0,0.08); text-align:center;">
        <img src="https://cdn-icons-png.flaticon.com/512/747/747376.png" alt="Register Icon" style="width:100px; margin-bottom:15px;">
        <h2 style="margin-bottom:20px; color:#333; font-weight:600;">Create Your Account</h2>

        <form method="POST" style="display:flex; flex-direction:column; gap:12px;">
            {% csrf_token %}
            <input type="text" name="username" placeholder="Enter Username" required style="padding:12px; border-radius:10px; border:1px solid #ccc; font-size:16px;">
            <input type="email" name="email" placeholder="Enter Email" required style="padding:12px; border-radius:10px; border:1px solid #ccc; font-size:16px;">
            <input type="password" name="password" placeholder="Enter Password" required style="padding:12px; border-radius:10px; border:1px solid #ccc; font-size:16px;">
            <input type="password" name="password2" placeholder="Confirm Password" required style="padding:12px; border-radius:10px; border:1px solid #ccc; font-size:16px;">
            <button type="submit" style="padding:12px; border-radius:10px; border:none; background:#6c63ff; color:white; font-size:16px; font-weight:600; cursor:pointer; transition:0.3s;">Register</button>
        </form>

        <p style="margin-top:15px; font-size:14px;">Already have an account? 
            <a href="{% url 'login' %}" style="color:#6c63ff; text-decoration:none; font-weight:600;">Login</a>
        </p>
    </div>
</div>

<!-- Modal HTML -->
<div id="messageModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.4); justify-content:center; align-items:center;">
    <div style="background:white; padding:25px 30px; border-radius:15px; text-align:center; max-width:350px; box-shadow:0 5px 20px rgba(0,0,0,0.3);">
        <p id="modalMessage" style="font-size:16px; color:#333; margin-bottom:20px;"></p>
        <button onclick="closeModal()" style="padding:10px 20px; border:none; border-radius:10px; background:#6c63ff; color:white; cursor:pointer; font-weight:600;">OK</button>
    </div>
</div>

<script>
function closeModal() {
    document.getElementById('messageModal').style.display = 'none';
}

// Show messages in modal
{% if messages %}
    {% for message in messages %}
        var modal = document.getElementById('messageModal');
        var modalMessage = document.getElementById('modalMessage');
        modalMessage.textContent = "{{ message }}";
        modal.style.display = "flex";

        {% if message.tags == "success" %}
            // Redirect after 2 seconds
            setTimeout(function(){
                window.location.href = "{% url 'login' %}";
            }, 2000);
        {% endif %}
    {% endfor %}
{% endif %}
</script>
{% endblock %}
